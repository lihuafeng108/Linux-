
一、编译链接库文件时，通过选项增加头文件和库文件搜寻路径，指定加载库文件
===

    Linux 下的大多默认将头文件放到/usr/include/目录下，而库文件则放到/usr/lib/目录下，但并不是所有的情况都是这样。正因如此，GCC在编译时必须有自己的办法来查找所需要的头文件和库文件。GCC采用搜索目录的办法来查找所需要的文件， -I 选项可以向 GCC 的头文件搜索路径中添加新的目录。例如，如果在/home/justin/include/ 目录下有编译时所需要的头文件，为了让GCC能够顺利地找到它们，就可以使用 -I 选项：<br>
    gcc foo.c -I /home/justin/include -o foo <br>
    同样，如果使用了不在标准位置的库文件，那么可以通过-L选项向GCC的库文件搜索路径中添加新的目录。例如，如果在 /home/xiaowp/lib/ 目录下有链接时所需要的库文件 libfoo.so ，为了让 GCC 能够顺利地找到它，可以使用下面的命令：<br>
    gcc foo.c -L /home/justin/lib -lfoo -o foo <br>
    得好好解释一下的是-l选项，它指示GCC去连接库文件 libfoo.so 。Linux下的库文件在命名时有一个约定，那就是应该以lib 三个字母开头，由于所有的库文件都遵循了同样的规范，因此在用-l 选项指定链接的库文件名时可以省去lib 三个字母，也就是说GCC 在对-lfoo 进行处理时，会自动去链接名为libfoo.so。<br>
    Linux下的库文件分为两大类分别是动态链接库（通常以.so 结尾）和静态链接库（通常以.a 结尾），两者的差别仅在程序执行时所需的代码是在运行时动态加载的，还是在编译时静态加载的 。默认情况下，GCC在链接时优先使用动态链接库，只有当动态链接库不存在时才考虑使用静态链接库，如果需要的话可以在编译时加上-static 选项，强制使用静态链接库。例如，如果在home/justin/lib/ 目录下有链接时所需要的库文件libfoo.so 和libfoo.a ，为了让GCC 在链接时只用到静态链接库，可以使用下面的命令
    gcc foo.c -L /home/justin/lib -static -lfoo -o foo

-------

二、linux下程序寻找动态库路径（按优先级排列）
===

1.编译生成时，指定的搜索路径。
---
    在makefile中，一般使用”-Wl -rpath”来指明程序运行时到哪个路径去找库。当指定多个动态库搜索路径时，路径之间用冒号隔开，不能有空格。

2.环境变量LD_LIBRARY_PATH中指定的路径。
---
    可以使用 echo LD_LIBRARY_PATH查看。一般初始时/lib和/user/lib库包含在里面。用户可以往里面添加。

3./etc/ld.so.cache中缓存的路径。
---
    /etc/ld.so.conf的第一行有一个引用命令：include ld.so.conf.d/*.conf, 所以可以通过修改/etc/ls.so.conf这个配置文件来增删路径,也可以增加一个.conf文件来配置特有的动态库路径。直接将寻库路径加进来即可，保存后需要运行一下ldconfig重载一下。

4.默认的/lib/和/usr/lib。
--
    这两个路径是系统最初就添加在LD_LIBRARY_PATH中，所以将库移动到这里亦可以寻找到。
  
补充：程序运行时不会把当前目录作为默认的寻库路径，除非你在编译时指定了
--
